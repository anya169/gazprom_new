!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("loginForm"),t=document.getElementById("errorMessage");e&&e.addEventListener("submit",(function(n){n.preventDefault();const a=new FormData(e),o=a.get("username"),c=a.get("password");fetch("http://127.0.0.1:8000/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:o,password:c})}).then((e=>e.json())).then((e=>{e.success?(console.log(e.log_ID),localStorage.setItem("log_ID",e.log_ID),localStorage.setItem("name",e.name),localStorage.setItem("surname",e.surname),localStorage.setItem("second_name",e.second_name),localStorage.setItem("department",e.department),localStorage.setItem("date_of_birth",e.date_of_birth),localStorage.setItem("experience",e.experience),localStorage.setItem("marital_status",e.marital_status),localStorage.setItem("address",e.address),localStorage.setItem("number",e.number),localStorage.setItem("email",e.email),localStorage.setItem("child_count",e.child_count),window.location.href="http://localhost:3001/profile.html"):(t.textContent=e.message,t.style.display="block")})).catch((e=>{console.error("Error:",e),t.textContent="Неверный логин и пароль",t.style.display="block"}))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=localStorage.getItem("log_ID"),t=localStorage.getItem("name"),n=localStorage.getItem("surname"),a=localStorage.getItem("second_name"),o=localStorage.getItem("department"),c=localStorage.getItem("date_of_birth"),r=localStorage.getItem("experience"),l=localStorage.getItem("marital_status"),s=localStorage.getItem("address"),d=localStorage.getItem("number"),m=localStorage.getItem("email"),i=localStorage.getItem("child_count");e&&t&&n?(document.querySelector(".info__surname-value").textContent=n,document.querySelector(".info__name-value").textContent=t,document.querySelector(".info__secondname-value").textContent=a,document.querySelector(".info__department-value").textContent=o,document.querySelector(".info__dateofbirth-value").textContent=c,document.querySelector(".info__exp-value").textContent=r,document.querySelector(".info__place-value").textContent=s,document.querySelector(".info__status-value").textContent=l,document.querySelector(".info__telephone-value").textContent=d,document.querySelector(".info__email-value").textContent=m,document.querySelector(".info__childcount-value").textContent=i,document.querySelector(".page-header__btn span").textContent=`${t} ${n}`):console.error("No user data found in localStorage")})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("filterForm");if(e){function t(e){const t=document.querySelector(".cards");t.innerHTML="",e.forEach((e=>{const n=document.createElement("article");n.className="card listing__card";const a=document.createElement("a");a.href="ben.html",a.className="card__link";const o=document.createElement("div");o.className="blog-card__container";const c=document.createElement("h1");c.className="card__title",c.textContent=e.title;const r=document.createElement("p");r.className="card__description",r.textContent=e.description,o.appendChild(c),o.appendChild(r);const l=document.createElement("div");l.className="card__liners",a.appendChild(o),a.appendChild(l),n.appendChild(a),t.appendChild(n)}))}e.addEventListener("submit",(function(n){n.preventDefault();const a=e.querySelector("#status").value,o=e.querySelector("#kids").value,c=e.querySelector("#time").value,r=window.location.pathname.split("/"),l=r[r.length-1],s=parseInt(l.replace(".html",""),10);console.log(s),fetch("http://127.0.0.1:8000/submit-filter?"+new URLSearchParams({status_value:a,kids_value:o,time_value:c,category_id:s}).toString()).then((e=>e.json())).then((e=>{console.log("Success:",e),e.success?t(e.benefits):console.error("Error:",e.message)})).catch((e=>{console.error("Error:",e)}))}))}})),document.addEventListener("DOMContentLoaded",(function(){const e=window.location.pathname.split("/"),t=e[e.length-1],n=parseInt(t.replace(".html",""),10);1!=n&&2!=n&&3!=n&&4!=n&&5!=n||fetch("http://127.0.0.1:8000/get-category-benefits?"+new URLSearchParams({category_id:n}).toString()).then((e=>e.json())).then((e=>{e.success?function(e){const t=document.querySelector(".cards");t.innerHTML="",console.log(t),e.forEach((e=>{const n=document.createElement("article");n.className="card listing__card";const a=document.createElement("a");a.href="ben.html",a.className="card__link";const o=document.createElement("div");o.className="blog-card__container";const c=document.createElement("h1");c.className="card__title",c.textContent=e.title;const r=document.createElement("p");r.className="card__description",r.textContent=e.description,o.appendChild(c),o.appendChild(r);const l=document.createElement("div");l.className="card__liners",a.appendChild(o),a.appendChild(l),n.appendChild(a),t.appendChild(n)}))}(e.benefits):console.error("Error:",e.message)})).catch((e=>{console.error("Error:",e)}))})),document.addEventListener("DOMContentLoaded",(function(){const e=window.location.pathname.split("/"),t=e[e.length-1].replace(".html","");console.log("Category ID:",t),"main"==t&&fetch("http://127.0.0.1:8000/get-benefits").then((e=>e.json())).then((e=>{console.log("Success:",e),e.success?function(e){const t=document.querySelector(".cards__main");t.innerHTML="",e.forEach((e=>{const n=document.createElement("article");n.className="card listing__card";const a=document.createElement("a");a.href="ben.html",a.className="card__link";const o=document.createElement("div");o.className="blog-card__container";const c=document.createElement("h1");c.className="card__title",c.textContent=e.title;const r=document.createElement("p");r.className="card__description",r.textContent=e.description,o.appendChild(c),o.appendChild(r);const l=document.createElement("div");l.className="card__liners",a.appendChild(o),a.appendChild(l),n.appendChild(a),t.appendChild(n)}))}(e.benefits):console.error("Error:",e.message)})).catch((e=>{console.error("Error:",e)}))})),document.addEventListener("DOMContentLoaded",(function(){const e=window.location.pathname.split("/"),t=e[e.length-1].replace(".html","");let n=localStorage.getItem("experience"),a=localStorage.getItem("marital_status"),o=localStorage.getItem("child_count");a="Женат/Замужем"==a?"1":"0",parseInt(n)<3?n="0":parseInt(n)>2&&parseInt(n)<6?n="1":parseInt(n)>5&&parseInt(n)<10?n="2":parseInt(n)>10&&(n="3"),0==parseInt(o)?o="0":1==parseInt(o)?o="1":2==parseInt(o)?o="2":parseInt(o)>2&&(o="3"),"fav"==t&&fetch("http://127.0.0.1:8000/get-fav?"+new URLSearchParams({status_value:a,kids_value:o,time_value:n}).toString()).then((e=>e.json())).then((e=>{console.log("Success:",e),e.success?function(e){const t=document.querySelector(".cards__main");t.innerHTML="",e.forEach((e=>{const n=document.createElement("article");n.className="card listing__card";const a=document.createElement("a");a.href="ben.html",a.className="card__link";const o=document.createElement("div");o.className="blog-card__container";const c=document.createElement("h1");c.className="card__title",c.textContent=e.title;const r=document.createElement("p");r.className="card__description",r.textContent=e.description,o.appendChild(c),o.appendChild(r);const l=document.createElement("div");l.className="card__liners",a.appendChild(o),a.appendChild(l),n.appendChild(a),t.appendChild(n)}))}(e.benefits):console.error("Error:",e.message)})).catch((e=>{console.error("Error:",e)}))})),document.getElementById("generate").addEventListener("click",(function(){localStorage.getItem("log_ID");const e={logID:"2",name:localStorage.getItem("name"),surname:localStorage.getItem("surname"),second_name:localStorage.getItem("second_name"),department:localStorage.getItem("department"),date_of_birth:localStorage.getItem("date_of_birth"),experience:localStorage.getItem("experience"),marital_status:localStorage.getItem("marital_status"),address:localStorage.getItem("address"),number:localStorage.getItem("number"),email:localStorage.getItem("email")};fetch("http://127.0.0.1:8000/generate?",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{alert("Ваше заявление успешно сгенерировано в папке C:/gazz!")})).catch((e=>{console.error("Ошибка:",e)}))}))}();